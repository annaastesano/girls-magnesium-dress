.tr-parallax-section {
  $block: &;

  .wrapper {
    // When fullpage is enabled
    @include mq($from: desktop) {
      @media(min-height: $tr-bp-short-screen-height) {
        margin-top: -(base-unit(13));
      }
    }
  }

  &__title-wrp {
    position: relative;
    z-index: 1;
  }

  &__title {
    position: relative;
    z-index: 1;
  }

  &__parallaxed-img {
    left: 23%;
    position: absolute;
    top: base-unit(9);
    transition: transform .7s;
    width: 75%;
    will-change: transform;
    z-index: 0;

    @include mq($from: desktop) {
      margin-top: 0;
      top: base-unit(6);
    }


    @include mq($from: desktop) {
      left: -37%;
      margin-top: 0;
      top: base-unit(15);
    }

    &--step-minus-1 {
      @include mq($from: desktop) {
        transform: translateY(base-unit(-20));
      }
    }

    &--no-transition {
      transition: none !important;
    }
  }

  &__bottom {
    position: relative;

    p {
      margin-bottom: base-unit(4);
      position: relative;
      z-index: 1;

      @include mq($from: mobile, $until: tablet) {
        margin-bottom: base-unit(4);
      }
    }

    // Second paragraph row, the container should drive
    // the padding bottom. We set the p margin bottom of
    // second row p to be zero.
    #{$block}__bottom-intro-paragraph-wrp + .row {
      p {
        margin-bottom: 0;
      }
    }
  }

  &__bottom-intro-paragraph-wrp {
    margin-top: base-unit(5);

    @include mq($from: tablet) {
      margin-top: base-unit(28);
    }

    @include mq($from: desktop) {
      margin: 0 0 base-unit(6);
    }
  }

  &__eyebrow {
    margin-bottom: base-unit(4);
    opacity: 1;
    position: relative;
    z-index: 1;

    @include mq($from: tablet) {
      max-width: none;
    }

    h4 {
      @extend .col-mobile-offset-1;
      @extend .col-tablet-offset-0;
      @extend .col-desktop-offset-1;

      border-left: 1px solid $tr-bastille;
      display: inline-block;
      margin-bottom: 0;
      margin-top: 0;
      max-width: 150px;
      padding: 0 base-unit(2) base-unit(2);
    }

    &--transition-opacity {
      transition: opacity .2s .1s;
    }

    &--desk-align-right {
      @include mq(tablet) {
        text-align: right;
      }
    }

    &--light {

      h4 {
        border-left: 1px solid $tr-white;
        color: $tr-white;
      }
    }

    &--sticky {
      position: fixed;
    }

    &--hidden {
      opacity: 0;
      transition: none;
    }

    &--faded-out {
      opacity: 0;
    }
  }

  &__infographic-wrp {
    margin-top: base-unit(7);
    position: relative;
    z-index: 1;

    @include mq($from: tablet) {
      margin-top: base-unit(15);
    }

    .col-xs-offset-2 {
      @include mq($from: tablet) {
        margin-left: 0;
      }
    }

    h3 {
      @include mq($until: tablet) {
        font-size: $tr-h2-mobile-font-size;
        line-height: $tr-h2-mobile-line-height;
      }

    }
  }

  &__infographic {
    max-width: 100%;
  }

  &--bg-image {

    #{$block}__parallaxed-img {
      @include bg-image-full-width('../img/customer/customer-bg');
      background-color: $tr-black;
      background-repeat: no-repeat;
      background-size: cover;
      height: 1500px;
      left: 0;
      top: 0;
      width: 100%;
      z-index: 1;

      @include mq($from: tablet) {
        height: 1800px;
      }

      @include mq($from: desktop) {
        height: 300%;
        z-index: -1;

        @media (max-height: $tr-bp-short-screen-height - 1px) {
          min-height: 2200px;
        }
      }

      &::after {
        background: linear-gradient(to bottom, rgba($tr-black, .2) 0%, rgba($tr-black, .2) 30%, rgba($tr-black, 1) 80%, rgba($tr-black, 1) 100%),
        linear-gradient(to right, rgba(0, 0, 0, .2) 0%, rgba(0, 0, 0, .2) 30%, rgba(0, 0, 0 , .5) 100%);
        content: '';
        display: block;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;

        @include mq($from: tablet) {
          background:
          linear-gradient(to bottom, rgba($tr-black, .2) 0%, rgba($tr-black, .2) 30%, rgba($tr-black, 1) 80%, rgba($tr-black, 1) 100%),
          linear-gradient(to right, rgba(0, 0, 0, .2) 0%, rgba(0, 0, 0, .2) 30%, rgba(0, 0, 0 , .7) 100%);
        }

        @include mq($from: desktop) {
          background: linear-gradient(to right, rgba(0, 0, 0, .2) 0%, rgba(0, 0, 0, .2) 30%, rgba(0, 0, 0 , .7) 100%),
          linear-gradient(to bottom, rgba($tr-black, .2) 0%, rgba($tr-black, .2), 60%, rgba($tr-black, 1) 80%, rgba($tr-black, .6) 100%);
        }
      }
    }

    #{$block}__parallaxed-img--step-1 {
      @include mq($from: desktop) {
        transform: translateY(base-unit(35));
      }
    }

    #{$block}__parallaxed-img--step-2 {
      @include mq($from: desktop) {
        transform: translateY(base-unit(70));
      }
    }

    #{$block}__parallaxed-img--step-3 {
      @include mq($from: desktop) {
        transform: translateY(base-unit(105));
      }
    }

    & + #{$block}__bottom,
    & + #{$block}__bottom + #{$block}__bottom {
      background-color: $tr-black;

      @include mq($from: desktop) {
        background-color: transparent;
      }
    }


    // If the parallaxy section is a background one
    // the gap between the title and the first paragraph
    // is shorter.
    & + #{$block}__bottom #{$block}__bottom-intro-paragraph-wrp {
      margin-top: -(base-unit(6));
    }
  }

  &--data-transform {

    #{$block}__parallaxed-img {
      left: 8.33%;

      &--step-1 {
        transform: translateY(base-unit(10));
      }
    }
  }

  &--get-started {
    &::before {
      background: $tr-black;
      content: '';
      height: base-unit(18);
      position: absolute;
      width: 100%;

      @include mq($from: desktop) {
        display: none;
      }
    }

    #{$block}__eyebrow {
      @include mq($from: desktop) {
        position: absolute;
        top: base-unit(10);
      }
    }

    h1 {
      @include mq($until: tablet) {
        text-align: center;
      }
    }

    .wrapper {
      @include mq($until: tablet) {
        padding-top: 0;
      }
    }

    #{$block}__parallaxed-img {
      display: block;
      left: auto;
      margin: -(base-unit(4)) 0 base-unit(4);
      margin-left: auto;
      margin-right: auto;
      max-width: 460px;
      position: relative;
      top: auto;
      width: 100%;
      z-index: 2;

      @include mq($from: tablet) {
        margin-top: -(base-unit(14));
      }

      @include mq($from: desktop) {
        margin-top: 0;
      }

      &--step-minus-1 {
        transform: translateY(0);

        @include mq($from: desktop) {
          transform: translateY(-30%);
        }
      }

      &--step-1 {
        transform: translateY(0);
      }
    }
  }

  &--has-bottom {
    .wrapper {
      padding-bottom: 0 !important;
    }
  }

}
