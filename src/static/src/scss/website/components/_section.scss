.tr-parallax-section {
  $block: &;

  &__title-wrp {
    position: relative;
    z-index: 1;
  }

  &__title {
    position: relative;
    z-index: 1;
  }

  &__parallaxed-img {
    position: absolute;
    transition: transform .7s;
    will-change: transform;
    z-index: 0;
    left: 23%;
    width: 75%;
    top: base-unit(9);

    @include mq($from: desktop) {
      top: base-unit(6);
      margin-top: 0;
    }


    @include mq($from: desktop) {
      top: base-unit(15);
      left: -37%;
      margin-top: 0;
    }

    &--before {
      @include mq($from: desktop) {
        transform: translateY(base-unit(-20));
      }
    }

    &--after {
      @include mq($from: desktop) {
        transform: translateY(base-unit(35));
      }
    }

    &--no-transition {
      transition: none !important;
    }
  }

  &__bottom {
    position: relative;

    p {
      margin-bottom: base-unit(4);
      position: relative;
      z-index: 1;

      @include mq($from: mobile, $until: tablet) {
        margin-bottom: base-unit(4);
      }
    }

    // Second paragraph row, the container should drive
    // the padding bottom. We set the p margin bottom of
    // second row p to be zero.
    #{$block}__bottom-intro-paragraph-wrp + .row {
      p {
        margin-bottom: 0;
      }
    }
  }

  &__bottom-intro-paragraph-wrp {
    margin-top: base-unit(5);

    @include mq($from: tablet) {
      margin-top: base-unit(28);
    }

    @include mq($from: wide) {
      margin: 0 0 base-unit(6);
    }
  }

  &__eyebrow {
    margin-bottom: base-unit(4);
    opacity: 1;
    position: relative;
    z-index: 1;

    @include mq($from: tablet) {
      max-width: none;
    }

    h4 {
      @extend .col-mobile-offset-1;
      @extend .col-tablet-offset-0;
      @extend .col-desktop-offset-1;

      border-left: 1px solid $tr-bastille;
      display: inline-block;
      max-width: 120px;
      margin-bottom: 0;
      margin-top: 0;
      padding: 0 base-unit(2) base-unit(2);
    }

    &--transition-opacity {
      transition: opacity .2s .1s;
    }

    &--desk-align-right {
      @include mq(tablet) {
        text-align: right;
      }
    }

    &--light {

      h4 {
        border-left: 1px solid $tr-white;
        color: $tr-white;
      }
    }

    &--sticky {
      position: fixed;
    }

    &--hidden {
      opacity: 0;
      transition: none;
    }

    &--faded-out {
      opacity: 0;
    }
  }

  &__infographic-wrp {
    margin-top: base-unit(7);
    position: relative;
    z-index: 1;

    @include mq($from: tablet) {
      margin-top: base-unit(15);
    }

    .col-xs-offset-2 {
      @include mq($from: tablet) {
        margin-left: 0;
      }
    }

    h3 {
      @include mq($until: tablet) {
        line-height: $tr-h2-mobile-line-height;
        font-size: $tr-h2-mobile-font-size;
      }

    }
  }

  &__infographic {
    max-width: 100%;
  }

  &--bg-image {
    #{$block}__parallaxed-img {
      background-image: url('../img/hero.jpg');
      background-color: $tr-black;
      background-repeat: no-repeat;
      background-size: cover;
      left: 0;
      top: 0;
      width: 100%;
      z-index: -1;
      height: 500px;
      z-index: 1;

      @include mq($from: mobile) {
        height: calc(200%);
      }

      @include mq($from: desktop) {
        z-index: -1;
        height: 200%;
      }
    }

    & + #{$block}__bottom {
      background-color: $tr-black;

      @include mq($from: desktop) {
        background-color: transparent;
      }
    }


    // If the parallaxy section is a background one
    // the gap between the title and the first paragraph
    // is shorter.
    & + #{$block}__bottom #{$block}__bottom-intro-paragraph-wrp {
      margin-top: - base-unit(6);
    }
  }

  &--data-transform {

    #{$block}__parallaxed-img {
      left: 8.33%;

      &--after {
        transform: translateY(base-unit(10));
      }
    }
  }

  &--get-started {
    &:before {
      content: '';
      height: base-unit(18);
      position: absolute;
      width: 100%;
      background: $tr-black;

      @include mq($from: desktop) {
        display: none;
      }
    }

    #{$block}__eyebrow {
      @include mq($from: desktop) {
        position: absolute;
        top: base-unit(10);
      }
    }

    h1 {
      @include mq($until: tablet) {
        text-align: center;
      }
    }

    .wrapper {
      @include mq($until: tablet) {
        padding-top: 0;
      }
    }

    #{$block}__parallaxed-img {
      left: auto;
      width: 100%;
      position: relative;
      top: auto;
      margin: - base-unit(4) 0 base-unit(4);
      max-width: 460px;
      display: block;
      margin-left: auto;
      margin-right: auto;

      @include mq($from: tablet) {
        margin-top: - base-unit(14);
      }

      &--before {
        transform: translateY(0);

        @include mq($from: desktop) {
          transform: translateY(-70%);
        }
      }

      &--after {
        transform: translateY(0);
      }
    }
  }

  &--has-bottom {
    .wrapper {
      padding-bottom: 0 !important;
    }
  }

}
