{% extends "./base.html" %}
{% load staticfiles %}

{% block main %}
<div class="dmb-registration"
    ng-controller="RegistrationCtrl as registrationCtrl"
    ng-cloak>
  <div class="h-c-page">
    <div class="h-c-grid" ng-if="!registrationCtrl.link">
      <div class="h-c-grid__col h-c-grid__col--12">
        <h1 class="dmb-registration__title h-c-headline h-c-headline--one">
          Ready to start benchmarking your businessâ€™ digital maturity?
        </h1>
        <p class="dmb-registration__subhead h-c-headline h-c-headline--subhead">
          Create a survey to share with your colleagues. Receive a personalised maturity report for your organisation.
        </p>
        <form name="registration" novalidate autocomplete="off" ng-submit="registrationCtrl.submit()">
          <div class="input-wrp">
            <input name="companyName" ng-model="registrationCtrl.companyName" type="text" required placeholder="Organization">
            <div class="input-wrp__error" ng-show="!registration.companyName.$pristine && registration.companyName.$error.required">This field is required.</div>
          </div>
          <button ng-disabled="!registration.$valid" class="h-c-button h-c-button--primary">
            Create Survey
          </button>
          <div class="input-wrp__error" ng-hide="!registrationCtrl.serverError">Oops, something went wrong!</div>
        </form>
      </div>
    </div>
    <div class="h-c-grid" ng-if="registrationCtrl.link">
      <div class="h-c-grid__col h-c-grid__col--12">
        <h1 class="dmb-registration__title h-c-headline h-c-headline--one">
            Your unique survey has now been created
        </h1>
        <h2 class="h-c-headline h-c-headline--four">Your personalised survey link</h2>
        <div class="dmb-registration__link">
          <div id="survey-link">
            {[ registrationCtrl.link ]}
          </div>
          <button
              class="h-c-link"
              ngclipboard
              data-clipboard-target="#survey-link">
            Copy
          </button>
        </div>
        <p class="dmb-registration__share-copy">
            Share this link with others in your business who could contribute to your maturity assessment. <strong>Keep it safe in case you need to access it again.</strong>
        </p>
        <a ng-href="{[ registrationCtrl.link ]}" class="h-c-button h-c-button--primary" target="_blank">
          Take the survey now
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
