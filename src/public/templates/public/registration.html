{% extends "./base.html" %}
{% load staticfiles %}

{% block main %}
<div class="dmb-registration"
    ng-controller="RegistrationCtrl as registrationCtrl"
    ng-cloak>
  <div class="h-c-page">
    <div class="h-c-grid" ng-if="!registrationCtrl.link">
      <div class="h-c-grid__col h-c-grid__col--12">
        <h1 class="dmb-registration__title h-c-headline h-c-headline--one">
          Ready to start benchmarking your businessâ€™ digital maturity?
        </h1>
        <p class="dmb-registration__subhead h-c-headline h-c-headline--four">
          Fill in these questions to start your assessment:
        </p>
        <form name="registration" novalidate autocomplete="off" ng-submit="registrationCtrl.submit()">
          <div class="input-wrp">
            <div class="dmb-input-wrp">
              <label for="companyName">Organisation name:</label>
              <input class="dmb-input" name="companyName" ng-model="registrationCtrl.companyName" type="text" required>
            </div>
            <div class="dmb-input-wrp">
              <label for="industry">Industry:</label>
              <select class="dmb-input" name="industry" id="industry" ng-model="registrationCtrl.industry" required>
                <option value="" disabled selected>Select an industry</option>
                {% for i_key, i_text in industries.items %}
                <option value="{{i_key}}">{{i_text}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="dmb-input-wrp">
              <label for="country">Country:</label>
              <select class="dmb-input" name="country" id="country" ng-model="registrationCtrl.country" required>
                <option value="" disabled selected>Select a country</option>
                {% for c_key, c_text in countries.items %}
                <option value="{{c_key}}">{{c_text}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="input-wrp__error" ng-show="!registration.companyName.$pristine && registration.companyName.$error.required">This field is required.</div>
          </div>
          <button ng-disabled="!registration.$valid" class="h-c-button h-c-button--primary">
            Create assessment
          </button>
          <div class="input-wrp__error" ng-hide="!registrationCtrl.serverError">Oops, something went wrong!</div>
        </form>
      </div>
    </div>
    <div class="h-c-grid" ng-if="registrationCtrl.link">
      <div class="h-c-grid__col h-c-grid__col--12">
        <h1 class="dmb-registration__title h-c-headline h-c-headline--one">
            Your unique survey has now been created
        </h1>
        <h2 class="h-c-headline h-c-headline--four">Your personalised survey link</h2>
        <div class="dmb-registration__link">
          <a ng-href="{[ registrationCtrl.link ]}" target="_blank" id="survey-link">
            {[ registrationCtrl.link ]}
          </a>
          <button
              class="h-c-link"
              ngclipboard
              data-clipboard-target="#survey-link">
            Copy
          </button>
        </div>
        <p class="dmb-registration__share-copy">
            Here is the link to your personalised digital marketing maturity assessment.<br><strong>Keep it safe in case you need to access it again.</strong>
        </p>
        <a ng-href="{[ registrationCtrl.link ]}" class="h-c-button h-c-button--primary" target="_blank">
          Take the survey now
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
