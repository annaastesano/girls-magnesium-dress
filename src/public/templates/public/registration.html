{% extends "./base.html" %}
{% load staticfiles %}
{% load angular %}

{% block main %}
<div class="dmb-registration"
    ng-controller="RegistrationCtrl as registrationCtrl"
    ng-cloak>
  <div class="h-c-page">
    <div class="h-c-grid" ng-if="!registrationCtrl.link">
      <div class="h-c-grid__col h-c-grid__col--12">
        <h1 class="dmb-registration__title h-c-headline h-c-headline--one">
          Ready to benchmark your companyâ€™s digital maturity?
        </h1>
        <p class="dmb-registration__subhead h-c-headline h-c-headline--four">
          Fill in these questions to start your assessment.
        </p>
        <form name="registration" novalidate autocomplete="off" ng-submit="registrationCtrl.submit()">
          <div class="input-wrp">
            <div class="dmb-input-wrp">
              <label for="companyName">Organisation name:</label>
              <input class="dmb-input" id="companyName" name="companyName" ng-model="registrationCtrl.companyName" type="text" required placeholder="Enter the organisation name">
            </div>
            <div class="dmb-input-wrp">
              <label for="industry">Industry:</label>
              <select class="dmb-input" name="industry" id="industry" ng-model="registrationCtrl.industry" required>
                <option value="" disabled selected>Select an industry</option>
                {% for i_key, i_text in industries %}
                <option value="{{i_key|ng_mark_safe}}">{{i_text|ng_mark_safe}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="dmb-input-wrp">
              <label for="country">Country:</label>
              <select class="dmb-input" name="country" id="country" ng-model="registrationCtrl.country" required>
                <option value="" disabled selected>Select a country</option>
                {% for c_key, c_text in countries %}
                <option value="{{c_key|ng_mark_safe}}">{{c_text|ng_mark_safe}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="input-wrp__error" ng-show="!registration.companyName.$pristine && registration.companyName.$error.required">This field is required.</div>
          </div>
          <button ng-disabled="!registration.$valid" class="h-c-button h-c-button--primary">
            Create assessment
          </button>
          <div class="input-wrp__error" ng-hide="!registrationCtrl.serverError">Oops, something went wrong!</div>
        </form>
      </div>
    </div>
    <div class="h-c-grid" ng-if="registrationCtrl.link">
      <div class="h-c-grid__col h-c-grid__col--12">
        <h1 class="dmb-registration__title h-c-headline h-c-headline--one">
          Your unique assessment has now been created
        </h1>
        <h2 class="h-c-headline h-c-headline--four">Your personalised assessment link</h2>
        <div class="dmb-registration__link">
          <a ng-href="{[ registrationCtrl.link ]}" target="_blank" id="survey-link">
            {[ registrationCtrl.link ]}
          </a>
          <button
              class="h-c-link"
              ngclipboard
              data-clipboard-target="#survey-link">
            Copy
          </button>
        </div>
        <p class="dmb-registration__share-copy">
          Here is the link to your personalised digital marketing maturity assessment. Keep it safe in case you need to return to it again later, so you can pick up where you left off.
        </p>
        <a ng-href="{[ registrationCtrl.link ]}" class="h-c-button h-c-button--primary" target="_blank">
          Start the assessment now
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
