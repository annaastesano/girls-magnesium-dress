{% extends 'public/base.html' %}
{% load staticfiles %}

{% block body_class %}dmb-report-page{% endblock %}

{% block main %}
<div dmb-report ng-cloak id="dmb-retail">

  {% include 'public/retail/report/report-intro.inc.html' %}

  {% include 'public/retail/report/report-hero.inc.html' %}

  {% include 'public/retail/report/report-overall.inc.html' %}


  <main class="dmb-report-page__content" id="dmb-report-page-main">
    <div class="h-c-page">
      <section class="dmb-report-page__dimensions"> <!-- Dimensions -->
        <h2 class="h-c-eyebrow h-c-eyebrow--wide">
          Dimensions of digital marketing maturity
          <button class="dmb-report-page__info" dmb-side-panel-trigger="#dmb-report-left-side-panel-three" aria-label="Get more informations about the 4 dimensions">
            <img src="{% static 'img/icons/info.svg' %}" alt="question mark" />
          </button>
        </h2>
        <p class="dmb-report-page__dimensions-intro">
          Together with Deloitte, we identified the dimensions that can drive your digital transformation through data. Click the icons to see how you perform in each.
        </p>

        <div class="dmb-report-page__tabs" data-ng-if="reportCtrl.showTabs">
          <div class="dmb-report-page__tabs-icons">

            <div
                class="h-u-text-center"
                ng-repeat="dimension in reportCtrl.dimensions"> <!-- dimension tabs-->
              <div class="dmb-progress-circle dmb-progress-circle--{[dimension]}">
                <svg dmb-progress-circle="reportCtrl.result.dmb_d[dimension]" class="dmb-progress-circle__prog-svg" viewbox="0 0 120 120">
                  <circle class="dmb-progress-circle__bg-bar" cx="60" cy="60" r="54" fill="none" stroke-width="12" />
                  <circle class="dmb-progress-circle__prog-bar" cx="60" cy="60" r="54" fill="none" stroke-width="12" />
                </svg>
                <div class="dmb-progress-circle__icon"></div>
              </div>
            </div> <!-- /dimension tabs -->

          </div>
          <div ng-if="reportCtrl.renderTabset">
            <div class="dmb-report-page__tabs-sticky-nav" aria-hidden="true" dmb-pin-top>
              <div class="h-c-page">
                <ul>

                  <li
                      ng-repeat="dimension in reportCtrl.dimensions">
                    <button
                        class="dmb-report-page__tabs-sticky-nav-btn"
                        ng-class="{'is-active': reportCtrl.model.activeEl == dimension}"
                        ng-click="reportCtrl.selectTab('dimension-tabs', dimension)">
                      {[reportCtrl.dimensionHeaders[dimension]]}
                    </button>
                  </li>

                </ul>
              </div>
            </div>
            <div class="glue-tabset"
                data-glue-tabset-state="['activeEl']"
                data-glue-state-id="dimension-tabs"
                data-glue-tabset-model="reportCtrl.model"
                data-glue-tabset-enable-arrow-nav
                ng-cloak>
              <ul>
                <li
                    ng-repeat="dimension in reportCtrl.dimensions"
                    data-glue-label="{[dimension]}"
                    id="{[dimension]}">
                  <h3>
                    {[reportCtrl.dimensionHeaders[dimension]]}
                  </h3>
                  <div>
                    <div
                      dmb-dimension-tab="{[dimension]}"
                      company-name="{[ reportCtrl.survey.company_name ]}">
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        {% comment %}
          We need to duplicate the tabset and zippy ( instead of just taking advantage of the tabby controller), because we have a bug where,
          if 2 way data binding is enabled (to be able to build the sticky nav,) when closing the a panel the page scrolls to the top ( probably # left at the end of the url).
          Unfortunately I coulnd't find the reason why this happens. The issue is related to the tabby using deeplinking ( unfortunately that is enabled by default when using
          2 way data binding)
        {% endcomment %}

        <div class="dmb-report-page__dimension-zippy" data-ng-if="!reportCtrl.showTabs">
          <div class="glue-zippy-set h-t-hercules" ng-cloak>
            <ul class="h-c-expansion-panels__list">
              <li
                  class="glue-zippy glue-a-zippy--v-smooth-expand dmb-report-page__zippy-container"
                  ng-repeat="dimension in reportCtrl.dimensions"
                  ng-attr-id="{[ dimension ]}">
                <div class="glue-zippy-btn">
                  <h4 class="h-c-expansion-panels__button-header dmb-report-page__zippy-btn">
                    {[ reportCtrl.dimensionHeaders[dimension] ]}
                  </h4>
                  <svg role="img" aria-hidden="true" class="h-c-icon--18px h-c-expansion-panels__button-arrow">
                    <use xlink:href="#mi-arrow-item"></use>
                  </svg>
                </div>
                <div class="glue-zippy-content">
                  <div
                      dmb-dimension-tab="{[dimension]}"
                      company-name="{[ reportCtrl.survey.company_name ]}">
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </section> <!-- / Dimensions -->

      {% comment "Out of scope for now, we will enable this in the future" %}
      <!-- <div class="h-u-text-right">
        <a href="#" class="h-c-link h-c-link--internal dmb-h-hidden--print">
          Go to next dimension
          <svg role="img" class="h-c-icon h-c-icon--link h-c-icon--arrow-forward">
            <use xlink:href="#mi-arrow-forward"></use>
          </svg>
        </a>
      </div> -->
      {% endcomment %}
    </div> <!-- h-c-page -->
  </main> <!-- #dmb-report-page-main -->

  <div class="dmb-report-page__appendix dmb-h-mb--medium dmb-h-hidden--screen">
    <div class="h-c-page">
      <h2 class="h-c-headline h-c-headline--three dmb-print-page-header">Appendix</h2>
    </div>
  </div>

  <aside id="dmb-report-left-side-panel-one" class="dmb-side-panel dmb-side-panel--left dmb-side-panel--narrow" dmb-side-panel>
    <button class="dmb-side-panel__fab dmb-fab" dmb-side-panel-close>
      <span class="dmb-fab__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <use xlink:href="#mi-close"></use>
        </svg>
      </span>
    </button>
    <div class="dmb-side-panel__inner">
      <h1 class="h-c-headline h-c-headline--three">
        Levels of data maturity
      </h1>
      <div ng-repeat="level in reportCtrl.levels">
        <h2 class="h-c-headline h-c-headline--three h-u-font-weight-medium">
          {[level]}
        </h2>
        <p>
          {[reportCtrl.levelDescriptions[$index]]}
        </p>
      </div>
    </div>
  </aside>

  <aside id="dmb-report-left-side-panel-two" class="dmb-side-panel dmb-side-panel--left dmb-side-panel--narrow" dmb-side-panel>
    <button class="dmb-side-panel__fab dmb-fab" dmb-side-panel-close>
      <span class="dmb-fab__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <use xlink:href="#mi-close"></use>
        </svg>
      </span>
    </button>
    <div class="dmb-side-panel__inner">
      <h1 class="h-c-headline h-c-headline--three">
        Benchmark calculations
      </h1>
      <h2 class="h-c-headline h-c-headline--subhead h-u-font-weight-medium">
        Industry average
      </h2>
      <p>
        How retailers perform on average; calculated based on the Deloitte Digital Transformation through Data study.
      </p>
      <h2 class="h-c-headline h-c-headline--subhead h-u-font-weight-medium">
        Industry best
      </h2>
      <p>
        This is the highest recorded score from a participant in the Deloitte Digital Transformation through Data study.
      </p>
    </div>
  </aside>

  <aside id="dmb-report-left-side-panel-three" class="dmb-side-panel dmb-side-panel--left dmb-side-panel--narrow" dmb-side-panel>
    <button class="dmb-side-panel__fab dmb-fab" dmb-side-panel-close>
      <span class="dmb-fab__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <use xlink:href="#mi-close"></use>
        </svg>
      </span>
    </button>
    <div class="dmb-side-panel__inner">
      <h1 class="h-c-headline h-c-headline--three">
        Four dimensions of data maturity
      </h1>
      <p>
        We measure data maturity across four different dimensions. Enabling advanced capabilities across these dimensions helps set leaders apart from the rest and gives them a disproportionate ability to drive value with their audience data. Based on your strategic choices, not all of the dimensions may be applicable to your organization.
      </p>
      <h2 class="h-c-headline h-c-headline--subhead h-u-font-weight-medium">
        Strategic direction and data foundations
      </h2>
      <p>
        Understand the role of data and the core capabilities required to successfully activate data within the organization.
      </p>
      <h2 class="h-c-headline h-c-headline--subhead h-u-font-weight-medium">
        User experience
      </h2>
      <p>
        Using customer data to enhance the overall online experience.
      </p>
      <h2 class="h-c-headline h-c-headline--subhead h-u-font-weight-medium">
        Core sales activities
      </h2>
      <p>
        Critical capabilities that leverage customer data to improve a retailerâ€™s ability to sell products and serve customers.
      </p>
      <h2 class="h-c-headline h-c-headline--subhead h-u-font-weight-medium">
        Emerging monetization opportunities
      </h2>
      <p>
        New investment opportunities that retailers can implement to better monetize their digital media assets and provide online-to-offline support.
      </p>
    </div>
  </aside>

</div>
{% endblock %}

{% block footer %}
  {% include 'public/inc/global/footer.html' with footerClass="dmb-h-hidden--print" footerAttribute="ng-cloak" %}
{% endblock footer %}
