{% load i18n %}
{% trans "Get more information about the industry average" as industry_avg_aria_text %}
{% trans "Get more information about the industry best" as industry_best_aria_text %}
<div class="dmb-progress-grid dmb-progress-grid--level-{[ progressGridCtrl.dmbLevelsFactory(ratingMain).current.value ]}">
    <!-- This list is visually hidden and only read out by screen readers -->
    <ul class="h-u-visually-hidden">
      <li>
        <span ng-if="!ratingMain">
          {% trans "Fetching your company rating..." %}
        </span>
        <span ng-if="ratingMain">
          {% trans "Your company, " %}
          {[ companyName ]},
          {% trans " has a rating of " %}
          {[ ratingMain|number:1 ]},
          {% trans " which is a maturity level of " %}
          {[ progressGridCtrl.dmbLevelsFactory(ratingMain).current.mapValue ]}.
        </span>
      </li>
      <li>
        <span ng-if="!industryReady">
          {% trans "Fetching industry average..." %}
        </span>
        <span ng-if="industryReady">
          {% trans "The industry average is " %}
          {[ industryAvg|number:1 ]},
          {% trans "which is a maturity level of " %}
          {[ progressGridCtrl.dmbLevelsFactory(industryAvg).current.mapValue ]}.
        </span>
      </li>
      <li>
        <span ng-if="!industryReady">
          {% trans "Fetching industry best..." %}
        </span>
        <span ng-if="industryReady">
          {% trans "The industry best is " %}
          {[ industryBest|number:1 ]},
          {% trans " which is a maturity level of " %}
          {[ progressGridCtrl.dmbLevelsFactory(industryBest).current.mapValue ]}.
        </span>
      </li>
    </ul>

  <!-- col-bg -->
  <div
      class="dmb-progress-grid__col-bg dmb-progress-grid__col-bg--level-{[ key ]}"
      ng-repeat="(key, level) in progressGridCtrl.levels">
  </div>

  <!-- grid headings -->
  <div
      class="dmb-progress-grid__heading dmb-progress-grid__heading--level-{[ key ]} h-c-eyebrow h-c-eyebrow--underlined"
      ng-repeat="(key, level) in progressGridCtrl.levels"
      aria-hidden="true">
    {[ level ]}
  </div>

  <!-- bar labels -->
  <div class="dmb-progress-grid__label dmb-progress-grid__label--company h-u-font-weight-medium">
    {[ companyName ]}
  </div>
  <div class="dmb-progress-grid__label dmb-progress-grid__label--ind-avg h-u-font-weight-regular">
    <button
        class="dmb-h-hidden--print"
        dmb-side-panel-trigger="#dmb-industry-side-panel"
        aria-label="{{industry_avg_aria_text}}">
       <svg role="img" class="dmb-svg dmb-svg--info" width="20px" height="20px">
          <use xlink:href="#info"></use>
        </svg>
    </button>
    <span aria-hidden="true">{% trans "Industry average" %}</span>
  </div>
  <div class="dmb-progress-grid__label dmb-progress-grid__label--ind-best h-u-font-weight-regular">
    <button
        class="dmb-h-hidden--print"
        dmb-side-panel-trigger="#dmb-industry-side-panel"
        aria-label="{{industry_best_aria_text}}">
       <svg role="img" class="dmb-svg dmb-svg--info" width="20px" height="20px">
          <use xlink:href="#info"></use>
        </svg>
    </button>
    <span aria-hidden="true">{% trans "Industry best" %}</span>
  </div>

  <!-- vertical bars -->
  <div
      class="dmb-progress-grid__v-bar dmb-progress-grid__v-bar--company"
      data-value="{[ ratingMain|number:1 ]}"
      data-level-name="{[ progressGridCtrl.dmbLevelsFactory(ratingMain).current.mapValue ]}"
      ng-style="{height: progressGridCtrl.getProgress(ratingMain)}"
      aria-hidden="true">
  </div>
  <div
      class="dmb-progress-grid__v-bar dmb-progress-grid__v-bar--ind-avg"
      data-value="{[ industryAvg|number:1 ]}"
      data-level-name="{[ progressGridCtrl.dmbLevelsFactory(industryAvg).current.mapValue ]}"
      ng-if="industryAvg"
      ng-style="{height: progressGridCtrl.getProgress(industryAvg)}"
      aria-hidden="true">
  </div>
  <div
      class="dmb-progress-grid__v-bar dmb-progress-grid__v-bar--ind-best"
      data-value="{[ industryBest|number:1 ]}"
      data-level-name="{[ progressGridCtrl.dmbLevelsFactory(industryBest).current.mapValue ]}"
      ng-if="industryBest"
      ng-style="{height: progressGridCtrl.getProgress(industryBest)}"
      aria-hidden="true">
  </div>

  <!-- horizontal bars -->
  <div
      class="dmb-progress-grid__h-bar dmb-progress-grid__h-bar--company"
      data-value="{[ ratingMain|number:1 ]}"
      ng-style="{width: progressGridCtrl.getProgress(ratingMain)}"
      aria-hidden="true">
  </div>
  <div
      class="dmb-progress-grid__h-bar dmb-progress-grid__h-bar--ind-avg"
      data-value="{[ industryAvg|number:1 ]}"
      ng-if="industryAvg"
      ng-style="{width: progressGridCtrl.getProgress(industryAvg)}"
      aria-hidden="true">
  </div>
  <div
      class="dmb-progress-grid__h-bar dmb-progress-grid__h-bar--ind-best"
      data-value="{[ industryBest|number:1 ]}"
      ng-if="industryBest"
      ng-style="{width: progressGridCtrl.getProgress(industryBest)}"
      aria-hidden="true">
  </div>

  <!-- "Not available" banners -->
  <div
      class="dmb-progress-grid__banner dmb-progress-grid__banner--ind-avg h-u-font-weight-regular"
      ng-if="industryReady && !industryAvg">
    {% trans "Not available yet" %}
  </div>
  <div
      class="dmb-progress-grid__banner dmb-progress-grid__banner--ind-best h-u-font-weight-regular"
      ng-if="industryReady && !industryBest">
    {% trans "Not available yet" %}
  </div>
</div>
