{% load i18n %}
{% trans "Get more information about the industry average" as industry_avg_aria_text %}
{% trans "Get more information about the industry best" as industry_best_aria_text %}
<div class="dmb-progress-grid dmb-progress-grid--level-{[ progressGridCtrl.ratingMainData['current']['value'] ]}">
    <!-- This list is visually hidden and only read out by screen readers -->
    <ul class="h-u-visually-hidden">
      <li>
        <span ng-if="!progressGridCtrl.ratingMain">
          {% trans "Fetching your company rating..." %}
        </span>
        <span ng-if="progressGridCtrl.ratingMain">
          {% trans "Your company, " %}
          {[ progressGridCtrl.companyName ]},
          {% trans " has a rating of " %}
          {[ progressGridCtrl.ratingMain|number:1 ]},
          {% trans " which is a maturity level of " %}
          {[ progressGridCtrl.ratingMainData['current']['mapValue'] ]}.
        </span>
      </li>
      <li>
        <span ng-if="!progressGridCtrl.industryReady">
          {% trans "Fetching industry average..." %}
        </span>
        <span ng-if="progressGridCtrl.industryReady">
          {% trans "The industry average is " %}
          {[ progressGridCtrl.industryAvg|number:1 ]},
          {% trans "which is a maturity level of " %}
          {[ progressGridCtrl.industryAvgData['current']['mapValue'] ]}.
        </span>
      </li>
      <li>
        <span ng-if="!progressGridCtrl.industryReady">
          {% trans "Fetching industry best..." %}
        </span>
        <span ng-if="progressGridCtrl.industryReady">
          {% trans "The industry best is " %}
          {[ progressGridCtrl.industryBest|number:1 ]},
          {% trans " which is a maturity level of " %}
          {[ progressGridCtrl.industryBestData['current']['mapValue'] ]}.
        </span>
      </li>
    </ul>

  <!-- col-bg -->
  <div
      class="dmb-progress-grid__col-bg dmb-progress-grid__col-bg--level-{[ key ]}"
      ng-repeat="(key, level) in progressGridCtrl.levels">
  </div>

  <!-- grid headings -->
  <div
      aria-hidden="true"
      class="dmb-progress-grid__heading dmb-progress-grid__heading--level-{[ key ]} h-c-eyebrow h-c-eyebrow--underlined"
      ng-repeat="(key, level) in progressGridCtrl.levels">
    {[ level ]}
  </div>

  <!-- bar labels -->
  <div class="dmb-progress-grid__label dmb-progress-grid__label--company h-u-font-weight-medium">
    {[ progressGridCtrl.companyName ]}
  </div>
  <div class="dmb-progress-grid__label dmb-progress-grid__label--ind-avg h-u-font-weight-regular">
    <button
        aria-label="{{industry_avg_aria_text}}"
        class="dmb-h-hidden--print"
        dmb-side-panel-trigger="#dmb-industry-side-panel">
       <svg role="img" class="dmb-svg dmb-svg--info" width="20px" height="20px">
          <use xlink:href="#info"></use>
        </svg>
    </button>
    <span aria-hidden="true">{% trans "Industry average" %}</span>
  </div>
  <div class="dmb-progress-grid__label dmb-progress-grid__label--ind-best h-u-font-weight-regular">
    <button
        aria-label="{{industry_best_aria_text}}"
        class="dmb-h-hidden--print"
        dmb-side-panel-trigger="#dmb-industry-side-panel">
       <svg role="img" class="dmb-svg dmb-svg--info" width="20px" height="20px">
          <use xlink:href="#info"></use>
        </svg>
    </button>
    <span aria-hidden="true">{% trans "Industry best" %}</span>
  </div>

  <!-- vertical bars -->
  <div
      aria-hidden="true"
      class="dmb-progress-grid__v-bar dmb-progress-grid__v-bar--company"
      data-level-name="{[ progressGridCtrl.ratingMainData['current']['mapValue'] ]}"
      data-value="{[ progressGridCtrl.ratingMain|number:1 ]}"
      ng-class="{
        'dmb-progress-grid__v-bar--max': progressGridCtrl.ratingMain === progressGridCtrl.levelsMax,
      }"
      ng-style="{ height: progressGridCtrl.ratingMainProgress }">
  </div>
  <div
      aria-hidden="true"
      class="dmb-progress-grid__v-bar dmb-progress-grid__v-bar--ind-avg"
      data-level-name="{[ progressGridCtrl.industryAvgData['current']['mapValue'] ]}"
      data-value="{[ progressGridCtrl.industryAvg|number:1 ]}"
      ng-class="{
        'dmb-progress-grid__v-bar--max': progressGridCtrl.industryAvg === progressGridCtrl.levelsMax,
      }"
      ng-if="progressGridCtrl.industryAvg"
      ng-style="{ height: progressGridCtrl.industryAvgProgress }">
  </div>
  <div
      aria-hidden="true"
      class="dmb-progress-grid__v-bar dmb-progress-grid__v-bar--ind-best"
      data-value="{[ progressGridCtrl.industryBest|number:1 ]}"
      data-level-name="{[ progressGridCtrl.industryBestData['current']['mapValue'] ]}"
      ng-class="{
        'dmb-progress-grid__v-bar--max': progressGridCtrl.industryBest === progressGridCtrl.levelsMax,
      }"
      ng-if="progressGridCtrl.industryBest"
      ng-style="{ height: progressGridCtrl.industryBestProgress }">
  </div>

  <!-- horizontal bars -->
  <div
      aria-hidden="true"
      class="dmb-progress-grid__h-bar dmb-progress-grid__h-bar--company"
      data-value="{[ progressGridCtrl.ratingMain|number:1 ]}"
      ng-class="{
        'dmb-progress-grid__h-bar--max': progressGridCtrl.ratingMain === progressGridCtrl.levelsMax,
      }"
      ng-style="{ width: progressGridCtrl.ratingMainProgress }">
  </div>
  <div
      aria-hidden="true"
      class="dmb-progress-grid__h-bar dmb-progress-grid__h-bar--ind-avg"
      data-value="{[ progressGridCtrl.industryAvg|number:1 ]}"
      ng-class="{
        'dmb-progress-grid__h-bar--max': progressGridCtrl.industryAvg === progressGridCtrl.levelsMax,
      }"
      ng-if="progressGridCtrl.industryAvg"
      ng-style="{ width: progressGridCtrl.industryAvgProgress }">
  </div>
  <div
      aria-hidden="true"
      class="dmb-progress-grid__h-bar dmb-progress-grid__h-bar--ind-best"
      data-value="{[ progressGridCtrl.industryBest|number:1 ]}"
      ng-class="{
        'dmb-progress-grid__h-bar--max': progressGridCtrl.industryBest === progressGridCtrl.levelsMax,
      }"
      ng-if="progressGridCtrl.industryBest"
      ng-style="{ width: progressGridCtrl.industryBestProgress }">
  </div>

  <!-- "Not available" banners -->
  <div
      class="dmb-progress-grid__banner dmb-progress-grid__banner--ind-avg h-u-font-weight-regular"
      ng-if="progressGridCtrl.industryReady && !progressGridCtrl.industryAvg">
    {% trans "Not available yet" %}
  </div>
  <div
      class="dmb-progress-grid__banner dmb-progress-grid__banner--ind-best h-u-font-weight-regular"
      ng-if="progressGridCtrl.industryReady && !progressGridCtrl.industryBest">
    {% trans "Not available yet" %}
  </div>
</div>
